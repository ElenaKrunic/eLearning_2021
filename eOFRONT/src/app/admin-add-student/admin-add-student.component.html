
<div class="submit-form">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      
        <div class="form-group">
            <label for="cardNumber"> Card number </label>
            <input type="text" 
            class="form-control"
            id="cardNumber"
            [(ngModel)]="student.cardNumber" 
            name="cardNumber"
            formControlName="cardNumber"
            [ngClass]="{ 'is-invalid': submitted && f.cardNumber.errors }"
            />
            <div *ngIf="submitted && f.cardNumber.errors" class="invalid-feedback">
                <div *ngIf="f.cardNumber.errors.required">Card number</div>
                <div *ngIf="f.name.errors.minlength">
                  Card number must be at least 3 characters!
                </div>
                <div *ngIf="f.name.errors.maxlength">
                  Card number must not exceed 13 characters!
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="firstName"> First name </label>
            <input type="text"
            class="form-control"
            id="firstName"
            [(ngModel)] = "student.firstName"
            name="firstName"
            formControlName="firstName"
            [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }"
            />
            <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">
                <div *ngIf="f.firstName.errors.required">First name</div>
                <div *ngIf="f.firstName.errors.minlength">
                  First must be at least 3 characters
                </div>
                <div *ngIf="f.firstName.errors.maxlength">
                  First must not exceed 13 characters
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="lastName"> Last name </label>
            <input type="text"
            class="form-control"
            id="lastName"
            [(ngModel)] = "student.lastName"
            name="lastName"
            formControlName="lastName"
            [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }"
            />
            <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">
                <div *ngIf="f.lastName.errors.required">First name</div>
                <div *ngIf="f.lastName.errors.minlength">
                  Last name must be at least 3 characters
                </div>
                <div *ngIf="f.firstName.errors.maxlength">
                  Last name must not exceed 13 characters
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="umnc"> UMNC </label>
            <input type="text"
            class="form-control"
            id="umnc"
            [(ngModel)] = "student.umnc"
            name="umnc"
            formControlName="umnc"
            [ngClass]="{ 'is-invalid': submitted && f.umnc.errors }"
            />
            <div *ngIf="submitted && f.umnc.errors" class="invalid-feedback">
                <div *ngIf="f.umnc.errors.required"> UMNC </div>
                <div *ngIf="f.umnc.errors.minlength">
                  UMNC must be at least 9 characters
                </div>
                <div *ngIf="f.umnc.errors.maxlength">
                 UMNC must not exceed 13 characters
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="email"> Email </label>
            <input type="text"
            class="form-control"
            id="email"
            [(ngModel)] = "student.email"
            name="email"
            formControlName="email"
            [ngClass]="{ 'is-invalid': submitted && f.email.errors }"
            >
            <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
              <div *ngIf="f.email.errors.required">Email is required</div>
              <div *ngIf="f.email.errors.email">Invalid email format</div>
            </div>
         </div>

        <div class="form-group">
            <label for="phoneNumber"> Phone number </label>
            <input type="string"
            class="form-control"
            id="phoneNumber"
            [(ngModel)] = "student.phoneNumber"
            name="phoneNumber"
            formControlName="phoneNumber"
            [ngClass]="{ 'is-invalid': submitted && f.phoneNumber.errors }"
            />
            <div *ngIf="submitted && f.phoneNumber.errors" class="invalid-feedback">
                <div *ngIf="f.phoneNumber.errors.required">Phone number is required</div>
            </div>
        </div>

            <div class="form-group">
                <label for="startedCollegeIn"> Started college in </label>
                <input type="number"
                class="form-control"
                id="startedCollegeIn"
                [(ngModel)] = "student.startedCollegeIn"
                name="startedCollegeIn"
                formControlName="startedCollegeIn"
                [ngClass]="{ 'is-invalid': submitted && f.startedCollegeIn.errors }"
                />
                <div *ngIf="submitted && f.startedCollegeIn.errors" class="invalid-feedback">
                    <div *ngIf="f.startedCollegeIn.errors.required"> The year of the start of college is mandatory</div>
                </div>
            </div>

        <div class="form-group">
                <label for="modelNumber"> Model number </label>
                <input type="number"
                class="form-control"
                id="modelNumber"
                [(ngModel)] = "student.modelNumber"
                name="modelNumber"
                formControlName="modelNumber"
                [ngClass]="{ 'is-invalid': submitted && f.modelNumber.errors }"
                />
                <div *ngIf="submitted && f.modelNumber.errors" class="invalid-feedback">
                    <div *ngIf="f.modelNumber.errors.required"> Model number is required! </div>
                </div>
        </div>

        <div class="form-group">
                <label for="referenceNumber"> Reference number </label>
                <input type="text"
                class="form-control"
                id="referenceNumber"
                [(ngModel)] = "student.referenceNumber"
                name="referenceNumber"
                formControlName="referenceNumber"
                [ngClass]="{ 'is-invalid': submitted && f.referenceNumber.errors }"
                />
                <div *ngIf="submitted && f.referenceNumber.errors" class="invalid-feedback">
                    <div *ngIf="f.referenceNumber.errors.required"> Reference number is required! </div>
                </div>    
        </div>

        <div class="form-group">
                <label for="accountNumber"> Account number </label>
                <input type="text"
                class="form-control"
                id="accountNumber"
                [(ngModel)] = "student.accountNumber"
                name="accountNumber"
                formControlName="accountNumber"
                [ngClass]="{ 'is-invalid': submitted && f.accountNumber.errors }"
                />
                <div *ngIf="submitted && f.accountNumber.errors" class="invalid-feedback">
                    <div *ngIf="f.accountNumber.errors.required"> Account number is required! </div>
                </div>
        </div>

        <div class="form-group">
          <label for="cardAmount"> Card amount </label>
          <input type="number"
          class="form-control"
          id="cardAmount"
          [(ngModel)] = "student.cardAmount"
          name="cardAmount"
          formControlName="cardAmount"
          [ngClass]="{ 'is-invalid': submitted && f.cardAmount.errors }"
          />
          <div *ngIf="submitted && f.cardAmount.errors" class="invalid-feedback">
              <div *ngIf="f.cardAmount.errors.required"> Card amount is required! </div>
          </div>
         </div>

         <div class="row w-50">
          <div class="col-md-8 pr-md-1 ml-5">
            <h4>Roles</h4>
            <div *ngIf="user.authorities.length > 0">
              <table class="table">
                <tr *ngFor="let authority of user.authorities">
                  <td class="color_text">
                    {{authority.name}}
                    <button type="button" class="btn btn-danger btn-sm" (click)="removeAuthority(role.name)">X</button>
                  </td>
                </tr>
              </table>
            </div>  
          </div>
          <div *ngIf="unassignedAuthorities.length > 0" class="col-md-7 pr-md-1 btn-group ml-5">
            <select class='form-control' [(ngModel)]="name" [ngModelOptions]="{standalone: true}">
              <option *ngFor="let authortiy of unassignedAuthorities" class="black_text_color" value="{{role.name}}">{{role.name}}</option>
            </select>
            <div class="text-right">
              <button type="button" class="btn btn-primary btn-sm ml-1" (click)="assignRole()">+</button>
            </div>
          </div>
        </div>

        <div *ngIf="submitted">
            <h4> The student was added successfully!</h4>
            <button class="btn btn-success" (click)="newStudent()"> Add new student </button>
        </div>
    
          <div class="form-group">
           <button (click)="saveStudent()" class="btn btn-success"> Submit </button>
            <button
              type="button"
              (click)="onReset()"
              class="btn btn-warning float-right"
            >
              Reset
            </button>
          </div>

          <div class="text-right mt-2">
            <button type="button" class=" btn btn-fill btn-danger" (click)="saveUser()">âœ“</button>
            <button type="button" class=" btn btn-fill btn-danger ml-1" (click)="goBack()">X</button>
          </div>
    </form>
</div>
